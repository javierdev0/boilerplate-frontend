# Contribuir a este repositorio

En primer lugar, ¡gracias por tomarte el tiempo para contribuir! Lo siguiente es un conjunto de pautas para contribuir a nuestro proyecto.
Animamos a todos a seguirlas con su mejor criterio.

## Tabla de contenidos

1. [Como preparar una PR](#cómo-preparar-una-pr)
    * [Lo esencial de una contribución de código](#lo-esencial-de-una-contribución-de-código)
    * [Configuración del cliente Git](#configuración-del-cliente-git)
    * [Hacer que tus cambios sean claros y rastreables](#hacer-que-tus-cambios-sean-claros-y-rastreables)
    * [Crear una PR](#crear-una-pr)
    * [Issue de criterios de aceptación](#issue-de-criterios-de-aceptación)
      * [Crear una issue](#crear-una-issue)
      * [Enlazar una issue](#enlazar-una-issue)
2. [Estrategia de ramificación](#estrategia-de-ramificación)
    * [Ramas clave](#ramas-clave)
    * [Como crear una rama](#como-crear-una-rama)
3. [Mergear una PR](#mergear-una-pr)
4. [Cosas que debes tener en cuenta](#cosas-que-debes-tener-en-cuenta)

## Cómo preparar una PR

Las PRs te permiten informar a otros sobre los cambios que has realizado en una rama de nuestro repositorio. Es un foro dedicado para discutir la implementación de la característica propuesta o la corrección de errores entre el autor y los revisores.

Este es un mecanismo esencial para mantener o mejorar la calidad de nuestra base de código, así que veamos que buscamos en una PR. A continuación se presentan todos los requisitos formales que deben cumplirse antes de considerar el contenido de los cambios propuestos.

### Lo esencial de una contribución de código

Aquí cubrimos la configuración de las herramientas que te ayudarán a escribir código que cumpla con nuestros estándares, así como las buenas prácticas que harán que tu contribución sea lo más útil posible.

#### Configuración del cliente Git

Lo primero es lo primero: Git es la base sobre la que se construye todo, así que queremos que sea lo más sólido posible.

- Comienza configurando tu `user.name` y `user.email` como se muestra en [personalización de Git](https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration). El parámetro `user.email` siempre debe ser el corporativo de Brace Developers. Si necesitas configurar identidades de Git diferentes en tu máquina, puedes aprovechar [includes condicionales](https://git-scm.com/docs/git-config#_conditional_includes).

#### Hacer que tus cambios sean claros y rastreables

Hay una **regla de oro** al abordar los cambios de código: **modifica solo lo que está relacionado con la tarea**.

Al desarrollar la próxima característica o corrección de errores, también debemos esforzarnos por realizar commits pequeños y atómicos, es decir, commits que agrupen cambios centrados en un contexto y solo un contexto.
Son más fáciles de leer, entender, revisar, rastrear y revertir.

La mejor manera de comunicar a los demás el contexto del cambio es un mensaje de commit de Git bien redactado. Aquí tienes un buen recurso sobre [como escribir un mensaje de commit de Git](https://chris.beams.io/posts/git-commit/) (o puedes ir directamente a las [pautas](https://chris.beams.io/posts/git-commit/#seven-rules)). Seguimos la especificación de los **commits convencionales** porque proporciona un conjunto fácil de reglas para crear un historial de commits explícito, consulta su [resumen rápido](https://www.conventionalcommits.org/en/v1.0.0/#summary).

### Crear una PR

Hay cinco partes importantes en una PR:

- **Título**. Existe un esquema de nomenclatura establecido que nos permite relacionar cada PR con su tarea de ClickUp: `[CU-<IDCLICKUP>] RESUMEN-CLICKUP`.
- **Descripción**. Haz todo lo posible para incluir solo información relevante. ¡Es perfectamente válido dejarlo vacío!
  - Si estás creando múltiples PRs bajo la misma tarea de ClickUp, puede ser útil mencionarlo en la descripción como `Relacionado con #<ID-PR>` o `Depende de #<ID-PR>`.
- **Rama de destino**. La rama de destino se determina mediante la sección [estrategia de ramificación](#estrategia-de-ramificación) que se encuentra a continuación.
- **Etiquetas**. Las etiquetas ayudan a clasificar las PRs similares.Asegúrate de etiquetar tu PR con las etiquetas correctas.
- **Tipo**. Si los cambios propuestos están listos para revisar, abre una PR.

### Issue de criterios de aceptación

Antes de comenzar a trabajar en una tarea de ClickUp, asegúrate de que los criterios de aceptación estén claros y completos. Si no lo están, pide aclaraciones a tu líder de equipo o al propietario de la tarea.

#### Crear una issue

Hay dos opciones en las que debes crear una issue:

- Cuando no haya una tarea de ClickUp relacionada. Si necesitas crear una issue, asegúrate de que esté clara y completa. Asegúrate de que la issue tenga un título claro y descriptivo, y que los criterios de aceptación estén completos.

- Algunas funcionalidades necesitan una issue de criterios de aceptación, como por ejemplo funcionalidades con formularios, tablas, botones de navegación, imágenes que viene de un endpoint, información que viene de un endpoint, etc.

#### Enlazar una issue

Si la funcionalidad creada necesita de una issue de criterios de aceptación o una issue normal, asegúrate de enlazarla antes o después de crear la PR. Para enlazar una issue, simplemente escribe `#` seguido del número de la issue en la descripción de la PR.

## Estrategia de ramificación: GitFlow

[Git](https://git-scm.com/) es nuestro sistema de control de versiones para rastrear los cambios en nuestra base de código. Como sabrás, en la implementación de Git, ¡las ramas son gratis!
Así que necesitamos una forma ordenada y controlada de lidiar con ellas: entra [Gitflow](https://nvie.com/posts/a-successful-git-branching-model/). Gitflow implica el uso de ramas de características y múltiples ramas principales: la rama `main`, que almacena el historial de lanzamientos oficiales, y la rama `release`, que sirve como rama de integración para las características.

### Ramas clave

**main**
- Siempre listo para deplegar a producción: Consideramos que `origin/main` es la rama principal donde el código fuente de `HEAD` siempre refleja un estado *listo para producción*.
- Evita cambios sin una PR (ver [mergear una PR](#combinar-una-solicitud-de-extracción))
- Los cambios provienen de la rama `develop` o `release`.
- Las versiones se crean a partir de esta rama.

**release**
- Esta debe ser creada a partir de `main`.
- La rama de lanzamiento para preparar la próxima versión de producción.
- Los cambios provienen de la rama `develop` pero también de `main` en el caso de sincronizaciones.
- La rama `release` es la rama de preparación para la próxima versión de producción.

**develop**
- Esta debe ser creada a partir de `release`.
- Los cambios provienen de las ramas `feature` y `bugfix`, pero también de `main` en el caso de sincronizaciones.
- La rama `develop` es la rama de integración para las características.
- Las ramas `feature`, `fix`, `refactor`, `update`, `chore` y `docs` se fusionan en `develop` y se crean a partir de ella.
- La rama `develop` es la rama de integración para las características.

### Como crear una rama

Las ramas deben ser creadas a partir de la rama `develop` y deben seguir el siguiente formato:

```bash
<prefijo>(backend|frontend)/<nombre>
```

#### Prefijos

- `feature`: Para ramas que agregan una nueva funcionalidad.
- `fix`: Para ramas que corrigen un error.
- `refactor`: Para ramas que realizan un refactor.
- `update`: Para ramas que actualizan una dependencia.
- `chore`: Para ramas que realizan tareas de mantenimiento.
- `docs`: Para ramas que agregan o actualizan documentación.

#### Nombre

El nombre de la rama debe ser una descripción corta de la funcionalidad que se está desarrollando.

- No debe contener espacios, en su lugar debe usarse el caracter `-`.
- Debe estar en minúsculas.
- No debe contener caracteres especiales.
- No debe contener doble guión medio (`--`).
- No debe contener guión medio al final.

> **Nota**: Es importante el no mezclar cambios del backend con el frontend. Si necesitas hacer cambios en ambos, crea dos ramas diferentes. Esto nos ayuda a probar la funcionalidades sin necesidad de mergear cambios que no están listos.

## Mergear una PR

Aquí hay una **Regla de Oro**:
- **Quien realiza los cambios, resuelve los conflictos**. El autor de los cambios es quien sabe si se cumplen completamente los criterios de aceptación de la tarea de ClickUp relacionado.

También hay un conjunto de requisitos que se deben cumplir antes de mergear una PR:

- **Espera a que los CI-CD sean exitoso**. CI-CD permite que todos sepan si tus commits cumplen las condiciones establecidas para nuestro repositorio.
- **Obtén al menos una aprobación de los revisores requeridos**. La revisión de código por parte de tus compañeros es esencial para mantener la calidad de la base de código.
- **Se cumplen completamente los criterios de aceptación de la tarera de ClickUp relacionado**.
- **Se han abordado todos los comentarios de los revisores**.
- **Sincroniza antes de resolver conflictos**. Así te aseguras de que todo funcione como se espera con la última revisión de la rama de destino.

## Cosas que debes tener en cuenta

- **No te saltes la revisión de husky** antes de hacer un commit. Husky es una herramienta que nos ayuda a mantener la calidad del código.
- **No te saltes la revisión de type-coverage** antes de hacer un commit. Type Coverage es una herramienta que nos ayuda a conocer la cobertura de tipos de nuestro código.
- **No hagas cambios que no estén relacionados con la tarea de ClickUp**. Si necesitas hacer un cambio que no está relacionado con la tarea de ClickUp, crea una nueva rama y un nuevo PR.
- **No hagas cambios en la rama `main` sin una PR**. La rama `main` es la rama principal donde el código fuente de `HEAD` siempre refleja un estado *listo para producción*.
- **No hagas cambios en la rama `develop` sin una PR**. La rama `develop` es la rama de integración para las características.
- **No hagas cambios en la rama `release` sin una PR**. La rama `release` es la rama de lanzamiento para preparar la próxima versión de producción.
